<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Ember Raffle - Win a ¬£30 Amazon Voucher</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #fff7ed 0%, #ffffff 50%, #fef3c7 100%);
        }
        .gradient-orange {
            background: linear-gradient(90deg, #f97316 0%, #eab308 100%);
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <header class="bg-white shadow-sm">
        <div class="max-w-4xl mx-auto px-4 py-8">
            <div class="flex justify-center">
                <img src="https://i.postimg.cc/yd403Vsw/Screenshot-2025-12-30-120658.png" alt="Wings of Hope & Team Ember" class="w-full max-w-md object-contain" onerror="this.style.display='none'; document.getElementById('fallbackHeader').style.display='flex';">
            </div>
            <div id="fallbackHeader" style="display:none;" class="flex items-center justify-center gap-4">
                <svg class="text-orange-500" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/>
                </svg>
                <div class="text-center">
                    <h1 class="text-2xl font-bold text-gray-800">Team Ember Raffle</h1>
                    <p class="text-sm text-gray-600">Wings of Hope</p>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto px-4 py-12">
        <div class="gradient-orange rounded-2xl shadow-xl p-8 text-white mb-12">
            <div class="text-center">
                <svg class="mx-auto mb-4 text-white" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/>
                </svg>
                <h2 class="text-4xl font-bold mb-4">Win a ¬£30 Amazon Voucher!</h2>
                <p class="text-xl mb-6">Support underprivileged children ‚Ä¢ ¬£2 per ticket</p>
                <a 
                    href="https://thewingsofhope.org/donations/team-ember/"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="inline-flex items-center gap-2 bg-white text-orange-600 px-8 py-4 rounded-full font-bold text-lg hover:bg-orange-50 transition-all transform hover:scale-105 shadow-lg"
                >
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                    </svg>
                    Donate Now
                </a>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-md p-8 mb-12">
            <h3 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                <svg class="text-orange-500" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/>
                </svg>
                About Team Ember
            </h3>
            <p class="text-gray-700 leading-relaxed">
                Hi there, we are a group of 5 Year 9 boys trying to raise money for underprivileged 
                children in India and Sierra Leone. Team Ember represents an undying fire and hope. 
                Our hope is to help as many children as we can through donations.
            </p>
        </div>

        <div id="entryForm" class="bg-white rounded-xl shadow-md p-8">
            <h3 class="text-2xl font-bold text-gray-800 mb-6">Enter the Raffle</h3>
            
            <div class="bg-orange-50 border-l-4 border-orange-500 p-4 mb-6">
                <p class="text-sm text-gray-700 mb-2">
                    <strong>How to enter:</strong> Donate ¬£2 (or multiples of ¬£2 for more tickets), 
                    then submit your details below.
                </p>
                <p class="text-sm text-gray-700 mb-2">
                    <strong>‚ö†Ô∏è Important:</strong> Make sure the name you enter matches the name on your donation so we can verify your entry.
                </p>
                <p class="text-sm text-gray-700">
                    <strong>üìß Winners will be notified via email</strong> - make sure to provide a valid email address!
                </p>
            </div>

            <div class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <svg class="inline mr-2" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                        </svg>
                        Your Name
                    </label>
                    <input
                        type="text"
                        id="nameInput"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                        placeholder="Enter your full name"
                    />
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <svg class="inline mr-2" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                            <polyline points="22,6 12,13 2,6"/>
                        </svg>
                        Email Address
                    </label>
                    <input
                        type="email"
                        id="emailInput"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                        placeholder="your.email@example.com"
                    />
                </div>

                <button
                    id="submitBtn"
                    class="w-full gradient-orange text-white py-4 rounded-lg font-bold text-lg hover:opacity-90 transition-all transform hover:scale-105 shadow-lg"
                >
                    Submit Entry
                </button>
            </div>
        </div>

        <div id="successMessage" class="hidden bg-green-50 border-2 border-green-500 rounded-xl p-8 text-center">
            <div class="text-green-600 mb-4">
                <svg class="mx-auto" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
                    <polyline points="22 4 12 14.01 9 11.01" />
                </svg>
            </div>
            <h3 class="text-2xl font-bold text-gray-800 mb-2">Entry Received!</h3>
            <p class="text-gray-700 mb-4">
                Thank you for your donation! We'll notify you via email at <strong id="confirmedEmail"></strong> if you're selected as the winner of the ¬£30 Amazon voucher.
            </p>
            <button
                id="anotherEntryBtn"
                class="text-orange-600 hover:text-orange-700 font-medium"
            >
                Submit another entry
            </button>
        </div>

        <div class="mt-12 text-center text-sm text-gray-600">
            <p>All proceeds go to Wings of Hope to support children in India and Sierra Leone</p>
            <p class="mt-2">Team Ember ‚Ä¢ Year 9 Fundraising Initiative</p>
        </div>
    </main>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        import { getStorage, ref, uploadBytes, getDownloadURL } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js';

        const firebaseConfig = {
            apiKey: "AIzaSyB7v6mkNVHab90HB0q2lCulyv0zBbMC5S4",
            authDomain: "team-ember-raffle.firebaseapp.com",
            projectId: "team-ember-raffle",
            storageBucket: "team-ember-raffle.firebasestorage.app",
            messagingSenderId: "794956887100",
            appId: "1:794956887100:web:09ba023afa74c66d57bf39"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const storage = getStorage(app);

        document.getElementById('submitBtn').addEventListener('click', async () => {
            const name = document.getElementById('nameInput').value.trim();
            const email = document.getElementById('emailInput').value.trim();

            if (!name || !email) {
                alert('Please enter your name and email address');
                return;
            }

            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('Please enter a valid email address');
                return;
            }

            // Disable submit button
            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = true;
            submitBtn.textContent = 'Submitting...';

            try {
                // Save entry to Firestore
                await addDoc(collection(db, 'raffle_entries'), {
                    name: name,
                    email: email,
                    timestamp: serverTimestamp()
                });

                // Show success message
                document.getElementById('confirmedEmail').textContent = email;
                document.getElementById('entryForm').classList.add('hidden');
                document.getElementById('successMessage').classList.remove('hidden');

            } catch (error) {
                console.error('Error submitting entry:', error);
                alert('There was an error submitting your entry. Please try again.');
                submitBtn.disabled = false;
                submitBtn.textContent = 'Submit Entry';
            }
        });

        document.getElementById('anotherEntryBtn').addEventListener('click', () => {
            document.getElementById('nameInput').value = '';
            document.getElementById('emailInput').value = '';

            document.getElementById('successMessage').classList.add('hidden');
            document.getElementById('entryForm').classList.remove('hidden');

            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = false;
            submitBtn.textContent = 'Submit Entry';
        });
    </script>
</body>
</html>
